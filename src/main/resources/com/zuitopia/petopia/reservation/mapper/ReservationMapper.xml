<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zuitopia.petopia.reservation.mapper.ReservationMapper">
    <insert id="insert">
        insert into reservation (reservation_id, user_id, branch_id, reservation_token, reservation_date, reservation_visit_time, reservation_payment)
        values (seq_reservation.nextval, #{userId}, #{branchId}, #{reservationToken}, #{reservationDate}, #{reservationVisitTime}, #{reservationPayment})
    </insert>

    <select id="getCurrentInfo" resultType="ReservationVO">
    <![CDATA[
        SELECT reservation_token, reservation_date, reservation_visit_time
        FROM reservation
        WHERE user_id = #{userId} AND branch_id = #{branchId}
          AND reservation_date = #{reservationDate} AND reservation_visit_time = #{reservationVisitTime}
        ]]>
</select>

    <select id="getStrollerCount">
    <![CDATA[
        SELECT (20 - reservation_cnt)
        FROM reservation_confirm
        WHERE branch_id = #{branchId} AND reservation_date = #{reservationDate}
        ]]>
</select>


</mapper>